<Project TreatAsLocalProperty="TaskFolder;TaskAssembly">
    <PropertyGroup>
        <TaskFolder Condition=" '$(MSBuildRuntimeType)' == 'Core' ">netcoreapp3.1</TaskFolder>
        <TaskFolder Condition=" '$(MSBuildRuntimeType)' != 'Core' ">net461</TaskFolder>
        <TaskAssembly>$(MSBuildThisFileDirectory)..\..\tasks\$(TaskFolder)\IKVM.Sdk.dll</TaskAssembly>
        <IkvmToolFramework Condition="$([MSBuild]::IsTargetFrameworkCompatible('$(TargetFramework)', 'net461'))">net461</IkvmToolFramework>
        <IkvmToolFramework Condition="$([MSBuild]::IsTargetFrameworkCompatible('$(TargetFramework)', 'netcoreapp3.1'))">netcoreapp3.1</IkvmToolFramework>
        <IkvmToolFolder>$(IkvmToolFramework)</IkvmToolFolder>
        <IkvmToolPath>$([System.IO.Path]::GetFullPath('$(MSBuildThisFileDirectory)..\..\tools\$(IkvmToolFolder)\'))</IkvmToolPath>
        <IkvmRuntimeDll>$([System.IO.Path]::GetFullPath('$(IkvmToolPath)IKVM.Runtime.dll'))</IkvmRuntimeDll>
        <IkvmUserDir>$([MSBuild]::EnsureTrailingSlash('$([System.Environment]::GetFolderPath(SpecialFolder.UserProfile))'))</IkvmUserDir>
        <IkvmHomeDir>$(IkvmUserDir).ikvm\</IkvmHomeDir>
        <IkvmUseDotNetExec>false</IkvmUseDotNetExec>
        <IkvmUseDotNetExec Condition=" '$(IkvmToolFramework)' == 'netcoreapp3.1' ">true</IkvmUseDotNetExec>
    </PropertyGroup>

    <PropertyGroup Condition=" '$(IkvmToolFramework)' == 'net461' ">
        <IkvmTool>$(IkvmToolPath)ikvm.exe</IkvmTool>
        <IkvmcTool>$(IkvmToolPath)ikvmc.exe</IkvmcTool>
        <IkvmstubTool>$(IkvmToolPath)ikvmstub.exe</IkvmstubTool>
    </PropertyGroup>

    <PropertyGroup Condition=" '$(IkvmToolFramework)' == 'netcoreapp3.1' ">
        <IkvmTool>$(IkvmToolPath)ikvm.dll</IkvmTool>
        <IkvmcTool>$(IkvmToolPath)ikvmc.dll</IkvmcTool>
        <IkvmstubTool>$(IkvmToolPath)ikvmstub.dll</IkvmstubTool>
    </PropertyGroup>

    <UsingTask TaskName="IkvmCompiler" AssemblyFile="$(TaskAssembly)" />
    <UsingTask TaskName="IkvmCalculateMD5" AssemblyFile="$(TaskAssembly)" />
    <UsingTask TaskName="IkvmAssignJavaReferenceItemMetadata" AssemblyFile="$(TaskAssembly)" />
    <UsingTask TaskName="IkvmAssignJavaReferenceItemIdentity" AssemblyFile="$(TaskAssembly)" />

    <ItemDefinitionGroup>
        <JavaReference>
            <AssemblyName></AssemblyName>
            <AssemblyVersion></AssemblyVersion>
            <Compile></Compile>
            <Aliases></Aliases>
            <References></References>
        </JavaReference>
    </ItemDefinitionGroup>
</Project>
