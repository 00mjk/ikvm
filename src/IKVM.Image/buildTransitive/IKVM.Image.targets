<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <PropertyGroup>
        <MSBuildAllProjects>$(MSBuildAllProjects);$(MSBuildThisFileFullPath)</MSBuildAllProjects>
    </PropertyGroup>

    <Choose>
        <When Condition="$([MSBuild]::IsTargetFrameworkCompatible('$(TargetFramework)', 'net461'))">
            <PropertyGroup>
                <IkvmImageTargetFramework>net461</IkvmImageTargetFramework>
            </PropertyGroup>
        </When>
        <When Condition="$([MSBuild]::IsTargetFrameworkCompatible('$(TargetFramework)', 'netcoreapp3.1'))">
            <PropertyGroup>
                <IkvmImageTargetFramework>netcoreapp3.1</IkvmImageTargetFramework>
            </PropertyGroup>
        </When>
    </Choose>

    <PropertyGroup Condition=" '$(IkvmRuntimeIdentifier)' == '' ">
        <IkvmRuntimeIdentifier>$(RuntimeIdentifier)</IkvmRuntimeIdentifier>
        <IkvmRuntimeIdentifier Condition=" '$(RuntimeIdentifier)' == '' And $([MSBuild]::IsTargetFrameworkCompatible('$(TargetFramework)', 'net461')) ">win7-x64</IkvmRuntimeIdentifier>
    </PropertyGroup>
    
    <ItemGroup>
        <ContentWithTargetPath Include="$(MSBuildThisFileDirectory)..\content\any\**\*">
            <TargetPath>%(RecursiveDir)%(FileName)%(Extension)</TargetPath>
            <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
        </ContentWithTargetPath>
    </ItemGroup>

</Project>
