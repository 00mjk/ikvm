<Project TreatAsLocalProperty="TaskFolder;TaskAssembly">
    
    <PropertyGroup>
        <IkvmDir>$(MSBuildThisFileDirectory)..\..\</IkvmDir>
        <IkvmVersion>$([System.IO.File]::ReadAllText('$(IkvmDir)VERSION'))</IkvmVersion>
    </PropertyGroup>

    <PropertyGroup>
        <IkvmTaskFolder Condition=" '$(MSBuildRuntimeType)' == 'Core' ">netcoreapp3.1</IkvmTaskFolder>
        <IkvmTaskFolder Condition=" '$(MSBuildRuntimeType)' != 'Core' ">net472</IkvmTaskFolder>
        <IkvmTaskAssembly>$(IkvmDir)tasks\$(IkvmTaskFolder)\IKVM.MSBuild.Tasks.dll</IkvmTaskAssembly>
    </PropertyGroup>

    <UsingTask TaskName="IkvmCompilerMergeReferenceAssemblies" AssemblyFile="$(IkvmTaskAssembly)" />
    <UsingTask TaskName="IkvmCompiler" AssemblyFile="$(IkvmTaskAssembly)" />
    <UsingTask TaskName="IkvmCalculateMD5" AssemblyFile="$(IkvmTaskAssembly)" />
    <UsingTask TaskName="IkvmReferenceItemAssignMetadata" AssemblyFile="$(IkvmTaskAssembly)" />
    <UsingTask TaskName="IkvmReferenceItemAssignIdentity" AssemblyFile="$(IkvmTaskAssembly)" />
    <UsingTask TaskName="IkvmReferenceItemSort" AssemblyFile="$(IkvmTaskAssembly)" />
    <UsingTask TaskName="IkvmReferenceItemValidate" AssemblyFile="$(IkvmTaskAssembly)" />

    <ItemDefinitionGroup>
        <IkvmReference>
            <AssemblyName></AssemblyName>
            <AssemblyVersion></AssemblyVersion>
            <Compile></Compile>
            <Sources></Sources>
            <Debug></Debug>
            <Aliases></Aliases>
            <References></References>
        </IkvmReference>
    </ItemDefinitionGroup>

</Project>
