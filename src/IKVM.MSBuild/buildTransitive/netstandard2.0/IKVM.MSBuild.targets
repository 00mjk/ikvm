<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <PropertyGroup>
        <MSBuildAllProjects>$(MSBuildAllProjects);$(MSBuildThisFileFullPath)</MSBuildAllProjects>
    </PropertyGroup>

    <PropertyGroup>
        <UseIkvmTasks Condition=" '$(UseIkvmTasks)' == '' ">true</UseIkvmTasks>
    </PropertyGroup>

    <PropertyGroup Condition=" '$(TargetFramework)' != '' ">
        <IkvmToolFramework Condition="$([MSBuild]::IsTargetFrameworkCompatible('$(TargetFramework)', 'netstandard1.0'))">NetCore</IkvmToolFramework>
        <IkvmToolFramework Condition="$([MSBuild]::IsTargetFrameworkCompatible('$(TargetFramework)', 'net461'))">NetFramework</IkvmToolFramework>
        <IkvmToolFramework Condition="$([MSBuild]::IsTargetFrameworkCompatible('$(TargetFramework)', 'netcoreapp3.1'))">NetCore</IkvmToolFramework>
    </PropertyGroup>

    <!--
    Optionally disable registration of tasks.
    -->
    <Import Project="IKVM.MSBuild.Tasks.targets" Condition=" '$(UseIkvmTasks)' == 'true' "/>
    <Import Project="IKVM.MSBuild.NoTasks.targets" Condition=" '$(UseIkvmTasks)' != 'true' "/>

    <!--
    PackageReference mode looks for IKVM tools and assemblies from the included IKVM and IKVM.MSBuild packages.
    ProjectReference mode looks for IKVM tools and assemblies from marked ProjectReferences. Used for internal builds.
    -->
    <Import Project="IKVM.MSBuild.PackageReferences.targets" Condition=" '$(UseIkvmProjectReferences)' != 'true' "/>
    <Import Project="IKVM.MSBuild.ProjectReferences.targets" Condition=" '$(UseIkvmProjectReferences)' == 'true' "/>

</Project>
